<nav class="navbar navbar-expand-lg navbar-light bg-orange">
  <div class="container-fluid">
    <!-- Barre de recherche (visible uniquement sur √©crans ‚â• md) -->
    <form class="d-flex search-bar d-none d-md-flex">
      <input class="form-control me-2" type="search" placeholder="Recherche..." aria-label="Search">
      <button class="btn btn-light" type="submit">
        <i class="fas fa-search"></i>
      </button>
    </form>

    <!-- Ic√¥nes de notification et profil utilisateur -->
    <div class="navbar-icons">
      <!-- Ic√¥ne de notification avec badge -->
      <div class="notification-icon-container">
        <i class="fas fa-bell notification-icon" (click)="showUnreadNotifications()"></i>
        <span class="badge bg-danger" *ngIf="unreadCount > 0">{{ unreadCount }}</span>
      </div>

      <!-- Profil utilisateur -->
      <div class="user-profile">
        <img src="avatarUser.png" alt="Admin">
        <div class="user-info">
          <span class="user-name">{{ userPrenom }} {{ userNom }}</span>
          <small class="user-role text-muted">{{ userRole }}</small>
        </div>
        <!-- Menu d√©roulant Bootstrap -->
        <div class="dropdown">
          <button class="btn btn-link dropdown-toggle" type="button" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
            <i class="fas fa-chevron-down"></i>
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdownMenuButton">
            <li><a class="dropdown-item" (click)="onEditProfile()">√âditer le profil</a></li>
            <li><a class="dropdown-item" (click)="onViewProfile()">Voir le profil</a></li>
            <li><a class="dropdown-item" (click)="onGenerateSecretCode()">G√©n√©rer un code secret</a></li>
          </ul>
          
        </div>
      </div>
    </div>
  </div>
</nav>

<!-- Notification temporaire -->
<div *ngIf="temporaryNotification" class="temporary-notification">
  üö® {{ temporaryNotification.message }} ({{ temporaryNotification.plaque }}) √† {{ temporaryNotification.heure }}
  <button class="btn btn-transfer" (click)="transferNotification(temporaryNotification._id)">Transf√©rer</button>
</div>

<!-- Modal: Edit Profile -->
<div class="modal fade" id="editProfileModal" tabindex="-1" aria-labelledby="editProfileModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header" style="background-color: #ff6600; color: white;">
        <h5 class="modal-title" id="editProfileModalLabel">Edit profil utilisateur</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form [formGroup]="editProfileForm">
          <div class="row">
            <div class="col-md-6">
              <label for="prenom" class="form-label">Pr√©nom</label>
              <input type="text" class="form-control" id="prenom" formControlName="prenom">
            </div>
            <div class="col-md-6">
              <label for="nom" class="form-label">Nom</label>
              <input type="text" class="form-control" id="nom" formControlName="nom">
            </div>
          </div>
          <div class="row">
            <div class="col-md-6">
              <label for="email" class="form-label">Email</label>
              <input type="email" class="form-control" id="email" formControlName="email">
            </div>
            <div class="col-md-6">
              <label for="telephone" class="form-label">T√©l√©phone</label>
              <input type="text" class="form-control" id="telephone" formControlName="telephone">
            </div>
          </div>
          <div class="row">
            <div class="col-md-6">
              <label for="adresse" class="form-label">Adresse</label>
              <input type="text" class="form-control" id="adresse" formControlName="adresse">
            </div>
            <div class="col-md-6">
              <label for="role" class="form-label">R√¥le</label>
              <select class="form-select" id="role" formControlName="role">
                <option value="agent de s√©curit√©">Agent de S√©curit√©</option>
                <option value="administrateur">Administrateur</option>
              </select>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Retour</button>
        <button type="button" class="btn btn-primary" (click)="onSubmit()">Mettre √† jour</button>
      </div>
    </div>
  </div>
</div>


<!-- Modal: View Profile -->
<div class="modal fade" id="viewProfileModal" tabindex="-1" aria-labelledby="viewProfileModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="viewProfileModalLabel">View Profile</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <div style="text-align: center;">
          <img src="avatarUser.png" alt="Avatar" style="border-radius: 50%; width: 100px; height: 100px;">
          <p>{{ userPrenom }} {{ userNom }}</p>
        </div>
        <div style="margin-top: 20px;">
          <p><strong>Prenom :</strong> {{ userPrenom }}</p>
          <p><strong>Nom :</strong> {{ userNom }}</p>
          <p><strong>Email:</strong> {{ userEmail }}</p>
          <p><strong>Adresse:</strong> {{ userAdresse }}</p>
          <p><strong>T√©l√©phone:</strong> {{ userTelephone }}</p>
          <p><strong>Role:</strong> {{ userRole }}</p>
        </div>
      </div>
    </div>
  </div>
</div>
